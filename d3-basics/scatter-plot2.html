<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF8">
        <script src="https://jsbin.com/tijudo/2.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.3/d3.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.7.0/underscore-min.js"></script>
    </head>
    <style>
        body {
            padding-top: 50px;
            padding-left: 100px;
        }

        svg {
            background-color: #d3d3d3;
        }

        .bubble {
            display: inline-block;
            stroke-weight: 1px;
        }

        .dot {
            fill: teal;
            fill-opacity: 0.7;
            stroke: black;
        }

        .active {
            fill: magenta;
            fill-opacity: 0.7;
            stroke-width: 3px;
        }
    </style>
    <body>
        <div id="charArea"></div>
        <script type="text/javascript">
            var dataset = _.map(_.range(50), function(i) {
                return {
                    x: Math.random() * 100,
                    y: Math.random() * 100,
                    r: Math.random() * 30,
                };
            });

            var margin = {top: 0, right: 0, bottom: 0, left: 0};
            var w = 400 - margin.left - margin.right;
            var h = 300 - margin.top - margin.bottom;

            var svg = d3.select('#charArea').append('svg')
                .attr('width', w + margin.left + margin.right)
                .attr('height', h + margin.top + margin.bottom)
                .append('g')
                .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');

            var xScale = d3.scale.linear()
                .domain([0, 100])
                .range([0, w]);

            var yScale = d3.scale.linear()
                .domain([0, d3.max(dataset, function(d) {
                    return d.y
                })])
                .range([0, h]);

            var colorScale = d3.scale.quantile()
                .domain([0, 10, dataset.length - 10, dataset.length])
                .range(['yellow', 'orange', 'green']);

            svg.selectAll('circle')
                .data(dataset)
                .enter()
                .append('circle')
                .attr('class', 'bubble dot')
                .attr('cx', function(d) {
                    return xScale(d.x);
                })
                .attr('cy', function(d) {
                    return yScale(d.y);
                })
                .attr('r', function(d) {
                    return d.r;
                })
                .on('mouseover', function(d) {
                    d3.select(this).classed('active', true);
                })
                .on('mouseout', function(d) {
                    d3.select(this).classed('active', false);
                })
                .on('mousedown', function(d) {
                    d3.select(this).attr('r', d.r * 2);
                })
                .on('mouseup', function(d) {
                    d3.select(this).attr('r', d.r);
                });
        </script>
    </body>
</html>
